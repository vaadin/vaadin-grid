<!doctype html>

<html>
<head>
  <meta charset="UTF-8">
  <title>iron-list test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <script src="../../../@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
  <script src="../../../wct-browser-legacy/browser.js"></script>
  <script type="module" src="../../../@polymer/test-fixture/test-fixture.js"></script>

  <script type="module" src="./helpers.js"></script>
  <script type="module" src="../vaadin-grid.js"></script>
  <script type="module" src="../../../@polymer/polymer/polymer-element.js"></script>
  <script type="module" src="../../../@polymer/polymer/lib/utils/import-href.js"></script>
</head>
<body>

  <dom-module id="x-grid">
    <template>
      <style>
        :host {
          display: block;
        }
      </style>

      <vaadin-grid id="grid" items="[1]">
        <vaadin-grid-column>
          <template class="header">[[localize('header')]]</template>
          <template>[[item]]</template>
        </vaadin-grid-column>
      </vaadin-grid>
    </template>
  </dom-module>

  <test-fixture id="grid">
    <template>
      <x-grid></x-grid>
    </template>
  </test-fixture>

  <script type="module">
import '@polymer/test-fixture/test-fixture.js';
import './helpers.js';
import '../vaadin-grid.js';
import { PolymerElement } from '@polymer/polymer/polymer-element.js';
import { importHref } from '@polymer/polymer/lib/utils/import-href.js';
import { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';
if (window.isV2()) {
  describe('app-localize-behavior', () => {
    let container, column, grid;

    before(done => {
      importHref('../../app-localize-behavior/app-localize-behavior.html', () => {
        class XGrid extends mixinBehaviors([Polymer.AppLocalizeBehavior], PolymerElement) {
          static get is() {
            return 'x-grid';
          }
          static get properties() {
            return {
              language: {
                value: 'en'
              }
            };
          }
          ready() {
            super.ready();
            this.loadResources('locales.json');
          }
        }
        window.customElements.define(XGrid.is, XGrid);
        done();
      });
    });

    beforeEach(function(done) {
      container = fixture('grid');
      grid = container.$.grid;
      listenOnce(container, 'app-localize-resources-loaded', () => done());
    });

    it('should localize', () => {
      expect(getHeaderCellContent(grid, 0, 0).innerText).to.equal('header');
    });

  });
}
</script>

</body>
</html>
